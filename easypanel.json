{
    "name": "whatsapp-api",
    "description": "WhatsApp API with multiple instances support",
    "type": "app",
    "image": "node:18-slim",
    "ports": {
        "3000": "3000"
    },
    "volumes": {
        "/app/.wwebjs_auth": "/usr/src/app/.wwebjs_auth"
    },
    "environment": {
        "NODE_ENV": "production",
        "PORT": "3000"
    },
    "install": {
        "commands": [
            "apt-get update",
            "apt-get install -y wget gnupg",
            "wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | apt-key add -",
            "sh -c 'echo \"deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main\" >> /etc/apt/sources.list.d/google.list'",
            "apt-get update",
            "apt-get install -y google-chrome-stable fonts-ipafont-gothic fonts-wqy-zenhei fonts-thai-tlwg fonts-kacst fonts-freefont-ttf libxss1 --no-install-recommends",
            "rm -rf /var/lib/apt/lists/*",
            "cd /app",
            "npm install"
        ]
    },
    "start": {
        "command": "cd /app && npm start"
    },
    "build": {
        "commands": [
            "cp -r /code/* /app/",
            "cd /app",
            "npm install"
        ]
    }
}